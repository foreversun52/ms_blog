{% extends 'backend/backend_base.html' %}
{% block title %}
    编辑文章
{% endblock %}
{% block site_name %}
    编辑文章
{% endblock %}

{% block css %}
    <link rel="stylesheet" href="/static/editormd/css/editormd.css"/>
{% endblock %}

{% block home %}
    <div>
        <form action="" method="post">
            {% csrf_token %}
            <p><b>标题</b></p>
            <p>
                <input type="text" name="title" class="form-control" id="title" value="{{ article_obj.title }}">
            </p>
            <p>
                <b>内容</b>
            </p>
            <p>
                {#                <textarea name="content" id="content" style="margin: 0px; width: 917px; height: 304px;" >{{ article_obj.content }}</textarea>#}
{#                <textarea name="content" id="content" cols="30" rows="10">{{ article_obj.content }}</textarea>#}
                            <div id="test-editor">
                <textarea name="content">{{ article_obj.content }}</textarea>
            </div>
            </p>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">分类</h3>
                </div>
                <div class="panel-body">
                    {% for category in category_list %}
                        {% if article_obj.category_id == category.pk %}
                            <input type="radio" value="{{ category.pk }}" checked name="category">{{ category.name }}
                        {% else %}
                            <input type="radio" value="{{ category.pk }}" name="category">{{ category.name }}
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title">是否置顶</h3>
                </div>
                <div class="panel-body">
                    <label for="zd"><font size="4">置顶:</font></label><input type="checkbox" name="stick" id="zd" {% if article_obj.stick %}checked="checked"{% endif %}>
                </div>
            </div>

            <input type="submit" class="btn btn-success">
            <a href="javascript:location.href='/backend/'" class="btn btn-danger">返回</a>

        </form>


    </div>
{#    <script charset="utf-8" src="/static/kindeditor/kindeditor-all-min.js"></script>#}
{#    <script>#}
{#        KindEditor.ready(function (K) {#}
{#            window.editor = K.create('#content', {#}
{#                width: '100%',#}
{#                height: '450px',#}
{#                resizeType: 1,#}
{#                uploadJson: '/upload_img/',#}
{#                extraFileUploadParams: {#}
{#                    'csrfmiddlewaretoken': '{{ csrf_token }}'#}
{#                }#}
{#            });#}
{#        });#}
{#    </script>#}
{% endblock %}

{% block js %}
    <script type="text/javascript">
        $(function () {
            var editor = editormd("test-editor", {
                path: "/static/editormd/lib/"
            });
        });
    </script>
    <script src="/static/editormd/editormd.js"></script>

{% endblock %}
